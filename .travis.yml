language: c

git:
    depth: 1

matrix:
    include:
        - os: linux
          dist: focal
          compiler: clang
        - os: linux
          dist: focal
          compiler: gcc
        - os: linux
          dist: bionic
          compiler: clang
        - os: linux
          dist: bionic
          compiler: gcc
        - os: linux
          dist: xenial
          compiler: clang
        - os: linux
          dist: xenial
          compiler: gcc

addons:
    apt:
        packages:
            - autoconf
            - automake
            - libtool
            - libudev-dev
            - m4
    homebrew:
        packages:
            - autoconf
            - automake
            - libtool
            - m4

before_script:
    - ./bootstrap.sh

script:
    - .private/ci-build.sh --build-dir build-netlink -- --disable-udev
    - .private/ci-build.sh --build-dir build-udev -- --enable-udev
